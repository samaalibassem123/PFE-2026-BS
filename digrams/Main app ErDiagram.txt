https://kroki.io/mermaid/svg/eNqdVEtyozAQ3fsUfYFcwDsSlD_YRfAiK5UKOrbGIFRCJOOxc_cIDEYIlWdqWMjl10_drz9qVCFnW8XKBZivO1A0JU1WrwSO3f_2q7XiYgtBGD3FLpg8usg6WT2Tu5RGQRw8kKQzf3fn5o0kltvN5ikEnsP6xXXR1KgEK9HFsWS8uIAaf2uQrK6_KpVf0E67qgqEhROa9spGBVwYB6r6hZmmRsj9y8TSqjjDYHnqDhKtX1fvZOoJS0m96bSGj6YoqD8nSad59YYdV0hzpnESJEdpSbUkhWQdJGlE4hSOvhtzWbUxXBR9n6sVpCmJwyC-I46XqQfNS6w1K6X-A9kOsz3l4oqxarSvUla92zyBad0lDBPyF-LewAdbZt_Jqxo_mcp2TMGk6APIcxSaf3BUc9mQKTQqclp5coJG5q7RakVEoluSvF0V5q-AfxbtmStlUR0QqSkTipyJDCl-mjT-M1h318Ht1jEpiwNtEa_Z_Co9nU_bbBSOxnMWgWnv3wX3wzkO5pC_6byzoU6nm5vT8bxWlmC2gQm66Ln2Mx2I1hNZglkae1PKgTo0rqcOA7aEHat9hMH1Eng9yLvapNm9WywqsaW6-reLY_VGTe6TncVoiYvZAux41aVwZoPyrTAj3UvxUcd62Owf9BWySg

erDiagram
    
    enum_ROLE {
        string ADMIN
        string RH
        string PROJECT_MANAGER
    }
    USER {
        UUID id PK
        string username
        string email
        text password
        ROLE role 

    }
    USER_PROJECT{
        int project_id FK
        int user_id FK 
    }
    
    EMPLOYE{
        int emp_id PK
        string emp_full_name
        string emp_email
        string hire_date
        int dep_id FK
    }
    
    DEPARTMENT {
        int dep_id PK
        string sep_name
    }

    ATTENDANCE {
        int id PK
        timestamptz check_in
        timestamptz check_out
        int emp_id FK
        date att_date 
        int week_day
    }

    PROJECT {
        int id PK
        varchar name
        varchar identifier
        timestamp created_on
        timestamp updated_on
        
    }
    MEMBERS {
        int id PK
        int emp_id FK
        int project_id FK
    }
    
    Employee_attendance_event {
        int id PK
        int emp_id FK
        int event_id FK
        timestamptz apply_time
        timestamptz start_date
        timestamptz end_date
    }
    Att_event {
        int id PK
        string name
    }   
    

 
    enum_ROLE ||--|{ USER : extend

    


    EMPLOYE ||--|{ DEPARTMENT : work_at 


    MEMBERS ||--|{ PROJECT : has
    MEMBERS ||--|{ EMPLOYE : is
    

    Employee_attendance_event ||--|{ EMPLOYE : Belong_to
    Employee_attendance_event ||--|{ Att_event : has
    
    ATTENDANCE ||--|{ EMPLOYE : has


    USER_PROJECT ||--o{ USER : assigned_to
    USER_PROJECT ||--o{ PROJECT : assigned_to

----------- v2 ----------------.
erDiagram
	

	users {
		UUID id
		VARCHAR(50) username
		VARCHAR(255) email
		TEXT password
		role_enum role
		TIMESTAMPTZ created_at
	}

	projects {
		SERIAL id
		VARCHAR(150) name
		VARCHAR(50) identifier
		TIMESTAMPTZ created_on
		TIMESTAMPTZ updated_on
	}

	user_project {
		SERIAL id
		UUID user_id
		INTEGER project_id
	}

	departments {
		SERIAL dep_id
		VARCHAR(100) dep_name
	}

	employees {
		SERIAL emp_id
		VARCHAR(150) emp_full_name
		VARCHAR(255) emp_email
		TIMESTAMPTZ hire_date
		INTEGER dep_id
	}

	members {
		SERIAL id
		INTEGER emp_id
		INTEGER project_id
	}

	attendance_events {
		SERIAL id
		VARCHAR(100) name
	}

	employee_attendance_event {
		SERIAL id
		INTEGER emp_id
		INTEGER event_id
		TIMESTAMPTZ apply_time
		TIMESTAMPTZ start_date
		TIMESTAMPTZ end_date
	}

	attendance {
		SERIAL id
		INTEGER emp_id
		TIMESTAMPTZ check_in
		TIMESTAMPTZ check_out
		TIMESTAMPTZ att_date
		INTEGER week_day
	}

    user_project }o--|| users : references
	user_project }o--|| projects : references
	employees }o--|| departments : references
	members }o--|| employees : references
	members }o--|| projects : references
	employee_attendance_event }o--|| employees : references
	employee_attendance_event }o--|| attendance_events : references
	attendance }o--|| employees : references